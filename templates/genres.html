{% extends "base.html" %}
<html>
<head>
{% block jquery %}
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
  var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>
{% endblock jquery %}
{% block headcontent%}
 <link rel="stylesheet" href="/static/main.css" type="text/css" media="screen">
 <link rel="stylesheet" href="/static/speakker.css"  type="text/css" media="screen">
 <link rel="stylesheet" href="/static/mspeakker.css" type="text/css" media="screen">
 <script type="text/javascript" src="/static/jquery.min.js"></script>
 <script type="text/javascript" src="/static/projekktor.min.js"></script>
 <script type="text/javascript" src="/static/speakker.min.js"></script>
{% endblock headcontent %}
</head>
<body>
{% block bodycontent %}
  <h1> {{ genre }} </h1>
  <div class="small_player"></div>
  <script type='text/javascript'>
  $(document).ready(function() {
      $(".small_player").speakker({
        file: 'songs/Mark Norwich/Mark.mp3',
        poster: '',
        title: 'hello',
        theme: 'dark'
      });
});
</script> 
<br><br><br><br><br><br><br><br>
  {% for song in songs %}
  
{{ song[1] }} by  {{ song[2] }} Views: {{ song[5] }}
<script type="text/javascript">
  $(function() {
    $("#submitBtn").click(function() {
         $.ajax({
            type: "GET",
            url: $SCRIPT_ROOT + "/echo/",
            contentType: "application/json; charset=utf-8",
            data: { views: $('div[name="{{song[7]}}views"]').html(), title: "{{song[1]}}" , author: "{{song[2]}}" },
            success: function(data) {
                $("#Likes{{song[7]}}").text(data.value);
            
}

        });     
    });
  });
</script>
<br><br>
<button type="button" id="submitBtn"  name="submitBtn" >Like</button>
<strong>Likes:<div name="{{song[7]}}views" id="Likes{{song[7]}}">{{song[6]}}</div></strong>
{% endfor %}
{% endblock bodycontent %}
</body>
</html>
